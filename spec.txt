SerialLCD Wire Protocol (sister program → daemon)
================================================

Transport
- UART (/dev/ttyAMA0 default), 115200 8N1, newline-delimited UTF-8 frames.
- One JSON object per line; no length prefix. Keep frames < 512 bytes.
- Daemon may cache state between frames; missing fields reuse last known values.

Frame structure (suggested keys)
- Required: `line1`, `line2` (strings; may be empty).
- Optional fast-changing fields: `bar` (0–100) or `bar_value` (+ optional `bar_max`, default 100), `bar_label`, `scroll_speed_ms`, `blink` (bool), `backlight` (only send when false to turn off), `ttl_ms`, `page_timeout_ms`.
- Optional infrequent fields: `hostname`, `ip`, labels. Send once, cache thereafter.
- Optional checksum: `checksum` (hex). If present and invalid, daemon drops the frame.

Behavior rules
- Auto-scroll: any line longer than display width scrolls at default speed; `scroll_speed_ms` overrides.
- Bar rendering: use `bar` percent if provided; otherwise compute percent from `bar_value` / `bar_max` (clamped to 100).
- Alerts: `blink=true` + `ttl_ms` can keep alert visible temporarily.
- Paging: daemon can cache multiple frames/pages; it auto-advances on `page_timeout_ms` (payload or config default) and can be advanced via a push-button.
- Heartbeat: send periodic frames or heartbeat flag to indicate liveness; daemon shows an icon if no frames arrive within a grace period.

Update cadence
- Fast metrics (CPU/RAM/uptime): send small frames ~500 ms cadence containing only changing fields (e.g., `line1`, `bar_value`).
- Static fields (IP/hostname/labels): send once at start or on change; omit otherwise.
- De-dupe: daemon skips rendering identical payloads.

Example frames
1) Dashboard with bar (fast metric):
{"line1":"Up 12:34  CPU 42%","line2":"","bar":42}

2) Alert with TTL:
{"line1":"ALERT: Temp","line2":"85C","blink":true,"ttl_ms":5000}

3) Long text auto-scroll with custom speed:
{"line1":"This message will scroll automatically across the display because it is long","line2":"","scroll_speed_ms":200}

4) Bar scaling with value/max and label:
{"line1":"NET 650/1000","line2":"","bar_value":650,"bar_max":1000,"bar_label":"NET"}

5) Paged frame with timeout hint:
{"line1":"Page 1: Stats","line2":"More info...","page_timeout_ms":4000}

6) Static info (send once or on change):
{"line1":"Host: rpi","line2":"IP: 192.168.1.10"}

Notes for sister program
- Keep frames short; avoid sending unchanged static fields every cycle.
- Use newline `\n` to delimit; ensure each frame is complete before sending.
- If you include `checksum`, pick a simple CRC32/hex; daemon drops mismatches.
- If backlight should stay on, omit `backlight`; send `backlight:false` to turn it off.
